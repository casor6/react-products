(this["webpackJsonpproducts-app"]=this["webpackJsonpproducts-app"]||[]).push([[0],{39:function(e,a,t){"use strict";t.r(a);var r=t(0),c=t(1),n=t(15),s=t.n(n),l=t(4),o=t(26),i=t(3),d=function(e){localStorage.setItem("user",JSON.stringify(e))},u=function(e){var a=JSON.parse(localStorage.getItem("users"))||[];return 0===a.length?null:a.find((function(a){return a.email===e}))},b="[auth] Login",j="[auth] Logout",m="[UI] set error",h="[UI] remove error",O="[UI] Start loading",p="[UI] Finish loading",f="[modal] Show login",x="[modal] Show Register",g="[product] Load",v=t(5),N=function(e){var a=JSON.parse(localStorage.getItem("products"))||[];return e?a.filter((function(a){return a.vendorId===e})):a},y=function(){return function(e,a){var t,r=null===(t=a().auth)||void 0===t?void 0:t.id,c=N(r);e(C(c))}},S=function(e){return function(a){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=JSON.parse(localStorage.getItem("products"))||[];return""===e?a:a.filter((function(a){return a.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))}(e);a(C(t))}},w=function(e){return function(a,t){var r=t().auth,c=r.id,n=r.name;!function(e){var a=JSON.parse(localStorage.getItem("products"))||[];a.push(e),localStorage.setItem("products",JSON.stringify(a))}(Object(v.a)({vendorId:c,vendorName:n},e));var s=N(c);a(C(s))}},C=function(e){return{type:g,payload:e}},I=function(e){return{type:m,payload:e}},k=function(){return{type:h}},E=function(e){return{type:b,payload:e}},M=function(e,a,t){return function(r){var c=u(a);if((null===c||void 0===c?void 0:c.email)!==a){var n={id:(new Date).getTime(),type:"vendor",name:e,email:a,password:t,products:[]};!function(e){var a=JSON.parse(localStorage.getItem("users"))||[];a.push(e),localStorage.setItem("users",JSON.stringify(a)),d(e)}(n),r(E(n)),r(y()),document.getElementById("closeModalAuth").click()}else r(I("Usuario ya existe. Intenta con otro"))}},L=function(){return{type:j}},J=function(e){e.id,e.vendorId;var a=e.vendorName,t=e.name,c=e.sku,n=e.price,s=e.units;return Object(r.jsx)("div",{className:"card",style:{maxWidth:300},children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h5",{className:"card-title",children:t}),a&&Object(r.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:a}),Object(r.jsxs)("p",{className:"card-text",children:["SKU: ",c]}),Object(r.jsxs)("p",{className:"card-text",children:["Precio: ",n]}),s&&Object(r.jsxs)("p",{className:"card-text",children:["Stock: ",s]}),Object(r.jsx)("span",{className:"card-link",style:{color:"blue",cursor:"pointer"},children:"Agregar a carrito"})]})})},U=function(){var e=Object(l.c)((function(e){return e.auth})),a=Object(l.c)((function(e){return e.product})).products;return Object(r.jsxs)("div",{className:"container pt-5",children:[e&&0===a.length&&Object(r.jsxs)("div",{children:["No tienes ning\xfan producto registrado, puedes agregar desde ",Object(r.jsx)("span",{style:{color:"blue",cursor:"pointer"},"data-toggle":"modal","data-target":"#addProductModal",children:"aqu\xed"})]}),Object(r.jsx)("div",{className:"card-columns",children:a.map((function(e){return Object(r.jsx)(J,Object(v.a)({},e),e.id)}))})]})},P=t(10),D=t(17),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(c.useState)(e),t=Object(P.a)(a,2),r=t[0],n=t[1],s=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;n(a)},l=function(e){var a=e.target;n(Object(v.a)(Object(v.a)({},r),{},Object(D.a)({},a.name,a.value)))};return[r,l,s]},A=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).msgError,t=_({name:"",sku:"",units:0,price:1}),c=Object(P.a)(t,3),n=c[0],s=c[1],o=c[2],i=n.name,d=n.sku,u=n.units,b=n.price;return Object(r.jsx)("div",{className:"modal fade",id:"addProductModal","aria-labelledby":"addProductModalLabel","aria-hidden":"true",children:Object(r.jsx)("div",{className:"modal-dialog",children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("h5",{className:"modal-title",id:"addProductModalLabel",children:"Crear producto"}),Object(r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(r.jsxs)("div",{className:"modal-body",children:[a&&Object(r.jsx)("div",{className:"alert alert-danger",role:"alert",children:a}),Object(r.jsxs)("form",{onSubmit:function(a){if(a.preventDefault(),e(k()),""===i||i.length<2)e(I("El nombre es obligatorio. Minimo 2 caracteres"));else if(""!==d)if(""!==u)if(""===b||b<=0)e(I("El precio es obligatorio. Mayor a cero"));else{e(k());var t={id:(new Date).getTime(),name:i,sku:d,units:u,price:b};e(w(t)),o()}else e(I("La contrase\xf1a es obligatorio."));else e(I("El sku es obligatorio."))},children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Nombre:"}),Object(r.jsx)("input",{type:"text",className:"form-control",name:"name",value:i,onChange:s})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Sku:"}),Object(r.jsx)("input",{type:"text",className:"form-control",name:"sku",value:d,onChange:s})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Cantidad:"}),Object(r.jsx)("input",{type:"text",className:"form-control",name:"units",value:u,onChange:s})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Precio:"}),Object(r.jsx)("input",{type:"text",className:"form-control",name:"price",value:b,onChange:s})]}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Crear"})]})]})]})})})},B=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).msgError,t=_({email:"",password:""}),c=Object(P.a)(t,3),n=c[0],s=c[1],o=c[2],i=n.email,b=n.password;return Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Iniciar sesi\xf3n"}),Object(r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",id:"closeModalAuth",children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(r.jsxs)("div",{className:"modal-body",children:[a&&Object(r.jsx)("div",{className:"alert alert-danger",role:"alert",children:a}),Object(r.jsxs)("form",{onSubmit:function(a){a.preventDefault(),e(function(e,a){return function(t){var r=u(e);r&&r.password===a?(d(r),t(E(r)),t(y()),document.getElementById("closeModalAuth").click()):t(I("Usuario y/o contrase\xf1a invalida"))}}(i,b)),o()},children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Correo:"}),Object(r.jsx)("input",{type:"text",className:"form-control",name:"email",value:i,onChange:s})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Contrase\xf1a:"}),Object(r.jsx)("input",{type:"password",className:"form-control",name:"password",value:b,onChange:s})]}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Ingresar"})]}),Object(r.jsx)("span",{onClick:function(){e(k()),e({type:x})},children:"Registrar"})]})]})},R=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).msgError,t=_({name:"",email:"",password:""}),c=Object(P.a)(t,3),n=c[0],s=c[1],o=c[2],i=n.name,d=n.email,u=n.password;return Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Crear cuenta"}),Object(r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",id:"closeModalAuth",children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(r.jsxs)("div",{className:"modal-body",children:[a&&Object(r.jsx)("div",{className:"alert alert-danger",role:"alert",children:a}),Object(r.jsxs)("form",{onSubmit:function(a){a.preventDefault(),e(k()),""===i||i.length<2?e(I("El nombre es obligatorio. Minimo 2 caracteres")):""!==d?""!==u?(e(k()),e(M(i,d,u)),o()):e(I("La contrase\xf1a es obligatorio.")):e(I("El correo es obligatorio."))},children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Nombre:"}),Object(r.jsx)("input",{type:"text",className:"form-control",name:"name",value:i,onChange:s})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Correo:"}),Object(r.jsx)("input",{type:"text",className:"form-control",name:"email",value:d,onChange:s})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"col-form-label",children:"Contrase\xf1a:"}),Object(r.jsx)("input",{type:"password",className:"form-control",name:"password",value:u,onChange:s})]}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Registrar"})]}),Object(r.jsx)("span",{onClick:function(){e(k()),e({type:f})},children:"Ya tengo cuenta"})]})]})},T=function(){var e=Object(l.c)((function(e){return e.modal})).show;return Object(r.jsx)("div",{className:"modal fade",id:"exampleModal","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(r.jsx)("div",{className:"modal-dialog",children:e?Object(r.jsx)(B,{}):Object(r.jsx)(R,{})})})},K=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.auth})),t=_({search:""}),c=Object(P.a)(t,2),n=c[0],s=c[1],o=n.search;return Object(r.jsxs)("nav",{className:"navbar navbar-dark bg-dark",children:[a?Object(r.jsx)("div",{className:"form-inline",children:Object(r.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0","data-toggle":"modal","data-target":"#addProductModal",children:"Agregar producto"})}):Object(r.jsx)("form",{className:"form-inline",children:Object(r.jsx)("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Buscar producto","aria-label":"Search",name:"search",value:o,onChange:s,onKeyUp:function(){e(S(o))}})}),!a&&Object(r.jsx)("span",{className:"navbar-brand","data-toggle":"modal","data-target":"#exampleModal",children:"Iniciar sesi\xf3n"}),a&&Object(r.jsx)("span",{className:"navbar-brand",onClick:function(){e((function(e){localStorage.setItem("user",null),e(L())})),e(y())},children:"Cerrar sesi\xf3n"}),Object(r.jsx)(T,{}),Object(r.jsx)(A,{})]})},X=function(){return Object(r.jsx)("div",{})},q=function(){var e=Object(l.b)();return Object(c.useEffect)((function(){var a=JSON.parse(localStorage.getItem("user"))||null;a&&e(E(a)),e(y())}),[e]),Object(r.jsxs)(o.a,{children:[Object(r.jsx)(K,{}),Object(r.jsx)("div",{children:Object(r.jsxs)(i.d,{children:[Object(r.jsx)(i.b,{path:"/",component:U}),Object(r.jsx)(i.b,{exact:!0,path:"/provider",component:X}),Object(r.jsx)(i.a,{to:"/"})]})})]})},F=t(11),V=t(27),W={show:!0},Y=t(28),z={products:[]},G={loading:!1,msgError:null},H="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,Q=Object(F.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case b:return a.payload;case j:return null;default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case m:return Object(v.a)(Object(v.a)({},e),{},{msgError:a.payload});case h:return Object(v.a)(Object(v.a)({},e),{},{msgError:null});case O:return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case p:return Object(v.a)(Object(v.a)({},e),{},{loading:!1});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case f:return{show:!0};case x:return{show:!1};default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g:return Object(v.a)(Object(v.a)({},e),{},{products:Object(Y.a)(a.payload)});default:return e}}}),Z=Object(F.e)(Q,H(Object(F.a)(V.a))),$=function(){return Object(r.jsx)(l.a,{store:Z,children:Object(r.jsx)(q,{})})};s.a.render(Object(r.jsx)($,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.46996717.chunk.js.map